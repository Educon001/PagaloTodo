@model List<FieldRequest>

@{
    //Variables necesarias
    int currInd = 0;
}

@* @functions { *@
@* *@
@*     public void inputField(int 0) *@
@*     { *@
         @* <div class="form-inline"> *@
         @*     <div class="mb-3 d-inline"> *@
         @*         <label asp-for="@Model[0].Name">Name</label> *@
         @*         <input asp-for="@Model[0].Name" class="form-control"> *@
         @*         <span asp-validation-for="@Model[0].Name" class="text-danger"></span> *@
         @*     </div> *@
         @*     <div class="mb-3 d-inline"> *@
         @*         <label asp-for="@Model[0].Format">Formato</label> *@
         @*         <input asp-for="@Model[0].Format" class="form-control"> *@
         @*         <span asp-validation-for="@Model[0].Format" class="text-danger"></span> *@
         @*     </div> *@
         @*     <div class="mb-3 d-inline"> *@
         @*         <label asp-for="@Model[0].Length">Longitud</label> *@
         @*         <input asp-for="@Model[0].Length" class="form-control"> *@
         @*         <span asp-validation-for="@Model[0].Length" class="text-danger"></span> *@
         @*     </div> *@
         @*     <div class="mb-3 d-inline"> *@
         @*         <label asp-for="@Model[0].AttrReference">Atributo Referencia</label> *@
         @*         <input asp-for="@Model[0].AttrReference" class="form-control"> *@
         @*         <span asp-validation-for="@Model[0].AttrReference" class="text-danger"></span> *@
         @*     </div> *@
         @* </div> *@
@*     } *@
@* } *@
<head>
    <link rel="stylesheet" href="~/create-format-grid.css" asp-append-version="true" />
</head>

<div class="row pb-2">
    <h2>Create Format</h2>
    <hr>
</div>

<form method="post" asp-route="createFormatR" asp-route-id="@ViewBag.ServiceId" class="border p-3 mt-4">
    <div id="htmlContainer" class="grid-container">
        <div>
            <h3>FIELD 0</h3>
        </div>
        <div class="form-group col-auto d-inline-block">
            <label asp-for="@Model[0].Name">Name</label>
            <input asp-for="@Model[0].Name" class="form-control">
            <span asp-validation-for="@Model[0].Name" class="text-danger"></span>
        </div>
        <div class="form-group col-auto d-inline-block">
            <label asp-for="@Model[0].Format">Formato</label>
            <input asp-for="@Model[0].Format" class="form-control">
            <span asp-validation-for="@Model[0].Format" class="text-danger"></span>
        </div>
        <div class="form-group col-auto d-inline-block">
            <label asp-for="@Model[0].Length">Longitud</label>
            <input asp-for="@Model[0].Length" class="form-control">
            <span asp-validation-for="@Model[0].Length" class="text-danger"></span>
        </div>
        <div class="form-group col-auto d-inline-block">
            <label asp-for="@Model[0].AttrReference">Referencia</label>
            <input asp-for="@Model[0].AttrReference" class="form-control">
            <span asp-validation-for="@Model[0].AttrReference" class="text-danger"></span>
        </div>
    </div>
        <br>
        <button type="submit" class="btn btn-primary" id="btnRenderHtml2">Create Conciliation Format</button>
</form>
<div class="container text-end">
    <button class="btn btn-dark" id="btnRenderHtml">Add Field</button>
    <a asp-controller="Service" asp-action="Index" class="btn btn-secondary">Back</a>
</div>

@section Scripts
{   @{
        <partial name="_ValidationScriptsPartial"/>
    }
}

<partial name="_ValidationScriptsPartial"/>


<script >
    let count = 0;
    let element = document.getElementById("btnRenderHtml");
    let container = document.getElementById("htmlContainer");
    let mainForm = document.querySelector("form");
    
    element.addEventListener("click", function (){
        count++;
        let newDiv = document.createElement("div");
        newDiv.className = "form-inline";
        newDiv.innerHTML = `<br><div><h3>FIELD ${count}</h3></div><div class="form-group col-auto d-inline-block"> <label for="z${count}__Name">Name</label>
                                            <input type="text" id="z${count}__Name" name="[${count}].Name" class="form-control" data-val="true" data-val-required="The Name field is required." value>
                                            <span class="text-danger field-validation-valid" data-valmsg-for="[${count}].Name" data-valmsg-replace="true"></span>
                                        </div>
                                        <div class="form-group col-auto d-inline-block">
                                             <label for="z${count}__Format">Formato</label>
                                             <input type="text" id="z${count}__Format" name="[${count}].Format" class="form-control" data-val="true" data-val-required="The Format field is required." value>
                                             <span class="text-danger field-validation-valid" data-valmsg-for="[${count}].Format" data-valmsg-replace="true"></span>
                                        </div>
                                        <div class="form-group col-auto d-inline-block">
                                             <label for="z${count}__Length">Longitud</label>
                                             <input type="number" id="z${count}__Length" name="[${count}].Length" class="form-control" data-val="true" data-val-required="The Length field is required." value>
                                             <span class="text-danger field-validation-valid" data-valmsg-for="[${count}].Length" data-valmsg-replace="true"></span>
                                        </div>
                                        <div class="form-group col-auto d-inline-block">
                                             <label for="z${count}__AttrReference">Atributo Referencia</label>
                                             <input type="text" id="z${count}__AttrReference" name="[${count}].AttrReference" class="form-control" data-val="true" data-val-required="The AttrReference field is required." value>
                                             <span class="text-danger field-validation-valid" data-valmsg-for="[${count}].AttrReference" data-valmsg-replace="true"></span>
                                        </div>`;
        container.appendChild(newDiv);
        // newDiv.innerHTML = `I like girls`;
    });

</script>
